<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Equation Runner</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        #gameCanvas {
            display: block;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        let score = 0;
        let equation = { left: '2x', right: '10' };
        let options = [3, 5, 7];
        let feedback = '';
        let playerY = 0.75; // Percentage of canvas height
        let isJumping = false;
        let jumpHeight = 0;

        // Responsive design variables
        let canvasWidth, canvasHeight;
        let scale;

        function resizeCanvas() {
            canvasWidth = window.innerWidth;
            canvasHeight = window.innerHeight;
            canvas.width = canvasWidth;
            canvas.height = canvasHeight;
            scale = Math.min(canvasWidth / 800, canvasHeight / 400);
            playerY = canvasHeight * 0.75;
        }

        function generateEquation() {
            const x = Math.floor(Math.random() * 10) + 1;
            const coefficient = Math.floor(Math.random() * 5) + 1;
            const right = coefficient * x;
            equation = { left: `${coefficient}x`, right: right.toString() };
            options = [x - 1, x, x + 1].sort(() => Math.random() - 0.5);
        }

        function drawGame() {
            // Clear canvas
            ctx.clearRect(0, 0, canvasWidth, canvasHeight);

            // Draw sky
            ctx.fillStyle = '#87CEEB';
            ctx.fillRect(0, 0, canvasWidth, canvasHeight);

            // Draw ground
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(0, canvasHeight * 0.875, canvasWidth, canvasHeight * 0.125);

            // Draw player
            ctx.fillStyle = '#FF0000';
            ctx.fillRect(canvasWidth * 0.0625, playerY - jumpHeight - canvasHeight * 0.1, canvasWidth * 0.05, canvasHeight * 0.1);

            // Draw equation
            ctx.fillStyle = '#000000';
            ctx.font = `${24 * scale}px Arial`;
            ctx.fillText(`${equation.left} = ${equation.right}`, canvasWidth * 0.025, canvasHeight * 0.075);

            // Draw score
            ctx.fillText(`Score: ${score}`, canvasWidth * 0.85, canvasHeight * 0.075);

            // Draw options
            options.forEach((option, index) => {
                ctx.fillStyle = '#4CAF50';
                ctx.fillRect(canvasWidth * (0.3125 + index * 0.25), canvasHeight * 0.75, canvasWidth * 0.125, canvasHeight * 0.1);
                ctx.fillStyle = '#FFFFFF';
                ctx.fillText(`x = ${option}`, canvasWidth * (0.3375 + index * 0.25), canvasHeight * 0.8125);
            });

            // Draw feedback
            ctx.fillStyle = '#000000';
            ctx.fillText(feedback, canvasWidth * 0.025, canvasHeight * 0.95);
        }

        function jump() {
            if (!isJumping) {
                isJumping = true;
                let jumpCounter = 0;
                const jumpInterval = setInterval(() => {
                    jumpCounter++;
                    jumpHeight = Math.sin((jumpCounter / 20) * Math.PI) * canvasHeight * 0.25;
                    if (jumpCounter > 20) {
                        clearInterval(jumpInterval);
                        isJumping = false;
                        jumpHeight = 0;
                    }
                }, 20);
            }
        }

        function handleClick(event) {
            const rect = canvas.getBoundingClientRect();
            const x = event.clientX - rect.left;
            const y = event.clientY - rect.top;

            options.forEach((option, index) => {
                if (x > canvasWidth * (0.3125 + index * 0.25) && 
                    x < canvasWidth * (0.4375 + index * 0.25) && 
                    y > canvasHeight * 0.75 && 
                    y < canvasHeight * 0.85) {
                    const correctValue = parseInt(equation.right) / parseInt(equation.left[0]);
                    if (option === correctValue) {
                        feedback = 'Correct!';
                        score += 10;
                        setTimeout(generateEquation, 1000);
                    } else {
                        feedback = 'Try again!';
                    }
                    jump();
                }
            });
        }

        canvas.addEventListener('click', handleClick);

        function gameLoop() {
            drawGame();
            requestAnimationFrame(gameLoop);
        }

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
        generateEquation();
        gameLoop();
    </script>
</body>
</html>
